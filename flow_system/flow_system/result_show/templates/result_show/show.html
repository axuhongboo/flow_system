
<html>
<head>
    <meta charset="utf-8">
    <!-- 引入 ECharts 文件 -->
    <script src="/static/result_show/echarts.min.js"></script>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">  
	<script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
	<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
<style>
li{
    display:inline;
}
</style>


<div id="main" style="width: 600px;height:400px;"></div>
    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));

        // 指定图表的配置项和数据
        var option = {
    tooltip: {
        trigger: 'item'
    },
    legend: {
        top: '5%',
        left: 'center'
    },
    series: [
        {
            name: '访问来源',
            type: 'pie',
            radius: ['40%', '70%'],
            avoidLabelOverlap: false,
            itemStyle: {
                borderRadius: 10,
                borderColor: '#fff',
                borderWidth: 2
            },
            label: {
                show: false,
                position: 'center'
            },
            emphasis: {
                label: {
                    show: true,
                    fontSize: '35',
                    fontWeight: 'bold'
                }
            },
            labelLine: {
                show: false
            },
            data: [
                {value: {{num_white}}, name: '正常流量'},
                {value: {{num_black}}, name: '恶意流量'},
            ]
        }
    ]
};

        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
    </script>
</head>
<script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('chart2'));
        option = {
            title : {
                //text: 'CTC客户稽核',
                subtext: 'CTC各客户稽核占比',
                x:'left'
            },
            tooltip : {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"  //鼠标悬停显示百分比
                //formatter: '{b}:{c}<br/>{b}:{c}'
            },
            legend: {
                type: 'scroll',
                orient: 'vertical',
                right: 10,
                top: 20,
                bottom: 20,
                data: {{ companyNames|safe }}
 
                //selected: data.selected
            },
            series : [
                {
                    name: '客户稽核次数',
                    type: 'pie',
                    radius : '55%',
                    center: ['40%', '50%'],
                    data: {{ series_data|safe }},
                   // formatter: '{b}\n{c}%', //显示百分比
                    itemStyle: {
                        emphasis: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        },
                        normal:{
                            label:{
                                show: true,
                                position: 'top',
                                formatter: '{b} \n({c},{d}%)'
                            }
                        }
 
                    }
                }
            ]
        };
        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
    </script>


<div >
    <nav>
        <table class="table">
            <caption>检测结果</caption>
            <thead>
                <tr>
                    <th>ip</th>
                    <th>label</th>
                </tr>
            </thead>
            <tbody>
            {%for subject in subject_list%}
                <tr>
                    <td>{{subject.name}}</td>
                    <td>{{subject.result}}</td>
                </tr>
            {%endfor%}
            </tbody>
        </table>
      
        <ul style="">
            {% if subject_list.has_previous %}
                <li>
                    <a href="?page={{ subject_list.previous_page_number }}" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
            {% endif %}

            {% for page_num in page_range %} 
                {% if page_num == subject_list.number %}
                    <li class="active">
                        <a href="#">
                            {{ page_num }}(now)
                        </a>
                    </li>
                {%else%}
                    <li>
                        <a href="?page={{ page_num }}">{{ page_num }}
                        </a>
                    </li>
                {% endif %}
            {% endfor %}
            {% if  subject_list.has_next %}
            <li class="enabled">
                <a href="?page={{ subject_list.next_page_number }}" aria-label="last">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
            {% endif %}
        </ul>
    </nav>
</div> 
</html>